<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <!-- Mirrored from www.setera.org/eclipsemeorg/2008/12/21/repairing-suns-wtk-after-a-jdk-upgrade/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Aug 2021 00:41:58 GMT -->
 <head>
  <title>
   EclipseME Home Page
  </title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="WordPress 2.6.5" name="generator"/>
  <!-- leave this for stats -->
  <link href="../../../../wp-content/themes/eclipseme/style.css" media="screen" rel="stylesheet" type="text/css"/>
  <!--
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://eclipseme.org/blog/feed/" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="http://eclipseme.org/blog/feed/rss/" />
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="http://eclipseme.org/blog/feed/atom/" />
	<link rel="pingback" href="http://eclipseme.org/blog/xmlrpc.php" />
-->
 </head>
 <body>
  <table border="0" cellpadding="0" cellspacing="0">
   <tbody>
    <tr style="height: 103px;">
     <td colspan="2">
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
       <tbody>
        <tr>
         <td style="width: 281px;">
          <img alt="logoTop" src="../../../../wp-content/themes/eclipseme/images/logoTop.png"/>
         </td>
         <td background="../../../../wp-content/themes/eclipseme/images/bg.png" style="vertical-align: bottom; text-align: right; padding-bottom: 10px; padding-right: 10px;">
          <img alt="pad" height="1" src="../../../../wp-content/themes/eclipseme/images/1p-trans.gif" width="400"/>
          <br/>
          <div class="PageHeader">
           J2ME Development using Eclipse
           <br/>
           <span style="font-style: italic;">
            "From
zero to mobile in
minutes"
           </span>
          </div>
         </td>
        </tr>
       </tbody>
      </table>
     </td>
    </tr>
    <tr>
     <td style="width: 220px; vertical-align: top;">
      <img alt="logoBottom" src="../../../../wp-content/themes/eclipseme/images/logoBot.png"/>
      <div style="text-align: center;">
       <table align="center" bgcolor="#cbcbcb" border="0" cellpadding="0" cellspacing="0">
        <tbody>
         <tr>
          <td>
           <table align="center" border="0" cellpadding="1" cellspacing="1">
            <tbody>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://sourceforge.net/donate/index.php?group_id=86829" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Donate!
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://eclipseme.org/" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Home
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://eclipseme.org/License.html" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                License
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://eclipseme.org/docs/prereqs.html" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Prerequisites
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://eclipseme.org/docs/news.html" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                News
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://eclipseme.org/docs/installation.html" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Installation
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://eclipseme.org/docs/index.html" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Documentation
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://sourceforge.net/project/showfiles.php?group_id=86829" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Downloads
               </a>
              </td>
             </tr>
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://eclipseme.org/docs/support.html" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Support
               </a>
              </td>
             </tr>
             <!--
                <tr>
                  <td bgcolor="#ebebeb"><a class="menu"
 href="http://eclipseme.org/blog/feed/" onmouseover="parentNode.bgColor='#000000';"
 onmouseout="parentNode.bgColor='#EBEBEB';">Subscribe (RSS)</a></td>
                </tr>
              -->
             <tr>
              <td bgcolor="#ebebeb">
               <a class="menu" href="http://sourceforge.net/projects/eclipseme/" onmouseout="parentNode.bgColor='#EBEBEB';" onmouseover="parentNode.bgColor='#000000';">
                Sourceforge
Project Page
               </a>
              </td>
             </tr>
            </tbody>
           </table>
          </td>
         </tr>
        </tbody>
       </table>
       <br/>
       <script type="text/javascript">
        <!--
google_ad_client = "pub-6209547544666090";
google_alternate_ad_url = "http://www.eclipseme.org/blank.html";
google_ad_width = 120;
google_ad_height = 240;
google_ad_format = "120x240_as";
google_ad_channel ="";
google_color_border = "CCCCCC";
google_color_bg = "FFFFFF";
google_color_link = "000000";
google_color_url = "666666.html";
google_color_text = "333333";
//-->
       </script>
       <br/>
       <a href="http://www.eclipse.org/">
        <img alt="Eclipse Ready Logo" border="0" src="../../../../wp-content/themes/eclipseme/images/rea_eclipse_pos_logo_fc_sm.gif"/>
       </a>
      </div>
      <br/>
     </td>
     <td style="vertical-align: top;">
      <!-- Begin Wordpress content -->
      <div class="post">
       <h1 class="storytitle" id="post-58">
        Repairing Sun’s WTK After a JDK Upgrade
       </h1>
       <h3>
        Craig Setera — December 21, 2008 @ 5:32 pm —
        <a href="../../../../category/miscellaneous/index.html" rel="category tag" title="View all posts in Miscellaneous">
         Miscellaneous
        </a>
       </h3>
       <div class="storycontent">
        <p>
         I have managed to get behind on the state of the Eclipse Mobile Tools for Java code.  In an effort to catch up, I downloaded the latest code to my Ubuntu box and started up a runtime workbench.  At that point, I needed to import my devices into the workspace and pointed to my Sun 2.5.2 Wireless Toolkit installation.  To my surprise, it failed to be recognized.  Given that I had fixed a similar problem prior to the MTJ 0.9.0 release, I was surprised to see a return of the problem.
         <br/>
         Before digging too far into the MTJ code, I decided to see that the emulator was actually working correctly.  I changed into the WTK emulator directory and attempted to run the emulator directly.
        </p>
        <pre>setera@ubuntu-laptop:~/software/wtk252/bin$ ./emulator
./emulator: 26: /usr/lib/jvm/java-1.5.0-sun/bin/java: not found
</pre>
        <p>
         Ah Ha!  My emulator installation is broken.  What’s going on?
         <br/>
         <span id="more-58">
         </span>
        </p>
        <pre>setera@ubuntu-laptop:~/software/wtk252/bin$ java -version
java version "1.6.0_10"
Java(TM) SE Runtime Environment (build 1.6.0_10-b33)
Java HotSpot(TM) Server VM (build 11.0-b15, mixed mode)</pre>
        <p>
         Sure enough, I remember recently updating my Java installation on this machine and deleting the older Java 5 installation.  Of course, I had forgotten that the Sun WTK writes these files during
         <b>
          installation
         </b>
         .  Edit the
         <i>
          emulator
         </i>
         file with a text editor and sure enough you can see that the installation path is hardcoded within the shell script file.
        </p>
        <pre>#!/bin/sh
javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/</pre>
        <p>
         In fact, all of the shell scripts in the WTK bin folder have the incorrect Java installation folder.
        </p>
        <pre>setera@ubuntu-laptop:~/software/wtk252/bin$ grep "/usr/lib/jvm/java-1.5.0-sun/bin/" *
defaultdevice:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
emulator:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
i18ntool:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
ktoolbar:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
mekeytool:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
prefs:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
siptool:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
utils:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/
wscompile:javapathtowtk=/usr/lib/jvm/java-1.5.0-sun/bin/</pre>
        <p>
         A bit of searching on my machine tells me that Java is linked into /usr/bin.
        </p>
        <pre>setera@ubuntu-laptop:~/software/wtk252/bin$ which java
/usr/bin/java</pre>
        <p>
         The safest configuration is to point to the actual installation folder.  Following a few links yields the installation path of /usr/lib/jvm/java-6-sun/jre/bin
        </p>
        <pre>setera@ubuntu-laptop:~/software/wtk252/bin$ ls -l /usr/bin/java
lrwxrwxrwx 1 root root 22 2008-11-02 07:18 /usr/bin/java -&gt; /etc/alternatives/java
setera@ubuntu-laptop:~/software/wtk252/bin$ ls -l /etc/alternatives/java
lrwxrwxrwx 1 root root 36 2008-11-02 07:18 /etc/alternatives/java -&gt; /usr/lib/jvm/java-6-sun/jre/bin/java</pre>
        <p>
         Editing the shell scripts and replacing the incorrect Java installation path with the correct path corrects the WTK installation and allows it to be used within MTJ again.
        </p>
        <pre>setera@ubuntu-laptop:~/software/wtk252/bin$ ./emulator
Syntax:

emulator [arguments] &lt;Application&gt;
</pre>
        <p>
         If you end up having trouble importing or otherwise running a Sun WTK emulator on Linux, you may want to try looking at your installation to see if you have a similar problem.
        </p>
       </div>
       <div class="feedback">
       </div>
       <!--
	<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
				xmlns:dc="http://purl.org/dc/elements/1.1/"
				xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
			<rdf:Description rdf:about="http://eclipseme.org/blog/2008/12/21/repairing-suns-wtk-after-a-jdk-upgrade/"
    dc:identifier="http://eclipseme.org/blog/2008/12/21/repairing-suns-wtk-after-a-jdk-upgrade/"
    dc:title="Repairing Sun&#8217;s WTK After a JDK Upgrade"
    trackback:ping="http://eclipseme.org/blog/2008/12/21/repairing-suns-wtk-after-a-jdk-upgrade/trackback/" />
</rdf:RDF>	-->
      </div>
      <!-- You can start editing here. -->
      <h3 id="comments">
       2 Responses to “Repairing Sun’s WTK After a JDK Upgrade”
      </h3>
      <ol class="commentlist">
       <li class="alt" id="comment-2414">
        <img alt="" class="avatar avatar-32" height="32" src="../../../../../../www.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536c3b8.png?s=32&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G" width="32"/>
        <cite>
         Hal Mueller
        </cite>
        Says:
        <br/>
        <small class="commentmetadata">
         <a href="index.html#comment-2414" title="">
          March 26th, 2009 at 6:40 pm
         </a>
        </small>
        <p>
         I think this may be the root of my problem as well, except I run Windows XP where JavaME SDK 3.0 is not recognized.  Will I need to edit the shell scripts (sutiably modified) as you indicated as well?
        </p>
       </li>
       <li id="comment-2415">
        <img alt="" class="avatar avatar-32" height="32" src="../../../../../../www.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536c3b8.png?s=32&amp;d=http%3A%2F%2Fwww.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G" width="32"/>
        <cite>
         <a href="http://eclipseme.org/" rel="external nofollow">
          Craig Setera
         </a>
        </cite>
        Says:
        <br/>
        <small class="commentmetadata">
         <a href="index.html#comment-2415" title="">
          March 29th, 2009 at 7:37 am
         </a>
        </small>
        <p>
         Hal,
        </p>
        <p>
         There have been sporadic problems with the 3.0 SDK.  These should be fixed in MTJ.  If you aren’t using MTJ, you should be.  If you are using MTJ, your best bet is to go to the user’s newsgroup and ask for help specifically for MTJ.
        </p>
        <p>
         While I’m a committer on the MTJ project, I have very little time these days and I’m heading out of town for the next week.  You will have much better luck if you ask this question over on the MTJ newgroups.
        </p>
        <p>
         Craig
        </p>
       </li>
      </ol>
      <!-- End Wordpress content -->
      <br/>
     </td>
    </tr>
    <tr height="31">
     <td align="center" background="../../../../wp-content/themes/eclipseme/images/footer.png" colspan="2">
      <div style="color: white; padding-top: 5px;">
       Copyright
©
2005, http://www.eclipseme.org. All rights reserved.
      </div>
     </td>
    </tr>
   </tbody>
  </table>
 </body>
 <!-- Mirrored from www.setera.org/eclipsemeorg/2008/12/21/repairing-suns-wtk-after-a-jdk-upgrade/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 09 Aug 2021 00:42:01 GMT -->
</html>
